<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
  <title>ZoLiryzik Community - Главная</title>
  
  <!-- Базовые иконки -->
  <link rel="shortcut icon" href="https://zoliryzik.ru/assets/img/icons/favicon.ico" type="image/x-icon">
  <link rel="icon" type="image/png" sizes="16x16" href="https://zoliryzik.ru/assets/img/icons/favicon-16x16.png">
  <link rel="icon" type="image/png" sizes="32x32" href="https://zoliryzik.ru/assets/img/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="192x192" href="https://zoliryzik.ru/assets/img/icons/android-chrome-192x192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="https://zoliryzik.ru/assets/img/icons/android-chrome-512x512.png">
  <link rel="apple-touch-icon" sizes="57x57" href="https://zoliryzik.ru/assets/img/icons/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="https://zoliryzik.ru/assets/img/icons/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="https://zoliryzik.ru/assets/img/icons/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="https://zoliryzik.ru/assets/img/icons/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="https://zoliryzik.ru/assets/img/icons/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="https://zoliryzik.ru/assets/img/icons/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="https://zoliryzik.ru/assets/img/icons/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="https://zoliryzik.ru/assets/img/icons/apple-touch-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="https://zoliryzik.ru/assets/img/icons/apple-touch-icon-180x180.png">

  <!-- Мета-теги -->
  <meta property="og:title" content="ZoLiryzik Community - Дискорд сервер лично для тебя!">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="description" content="ZoLiryzik Community - Дискорд сервер лично для тебя!">
  <meta name="keywords" content="discord, server, дискорд, сервер, проект">
  <meta property="og:image" content="assets/img/logo.webp">

  <!-- Стили -->
  <link rel="stylesheet" href="https://zoliryzik.ru/assets/css/banner.css">
  <link rel="stylesheet" href="https://zoliryzik.ru/assets/css/button.css">
  <link rel="stylesheet" href="https://zoliryzik.ru/assets/css/main.css">
  <link rel="stylesheet" href="https://zoliryzik.ru/assets/css/news.css">

  <!-- Стили для ленты отзывов -->
  <style>
    .feed-container {
        width: 100%;
        background: #23272A;
        border-top: 2px solid #eee;
        overflow-x: hidden !important;
        padding: 40px 0;
        margin-top: 60px;
    }

    .comments-container {
      display: inline-flex;
      gap: 15px;
      padding: 0 20px;
      will-change: nowrap;
      will-change: transform;
      align-items: stretch; /* Равная высота элементов */
    }

    .comment {
        display: flex;
        flex-direction: column;
        width: 320px;
        height: 280px; /* Фиксированная высота */
        padding: 20px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 8px;
        border: 1px solid #eee;
        margin: 10px;
        box-sizing: border-box; /* Учитываем padding в ширине */
    }

    .comment-author {
        font-weight: 600;
        color: var(--dark-accent);
        margin: 0;
        padding: 0;
}

    .comment-header {
        display: flex;
        flex-direction: column;
        margin-bottom: 10px;
        gap: 4px;
}

    .comment-text {
      flex: 1; /* Занимаем все доступное пространство */
      color: #ffffff;
      font-size: 14px;
      line-height: 1.5;
      white-space: pre-wrap;
      word-break: break-word;
      overflow-y: auto; /* Добавляем скролл при необходимости */
      padding-right: 8px; /* Отступ для скролла */
      margin: 10px 0;
    }

    .comment-rating {
        color: #ffc107;
        font-weight: bold;
        margin-top: auto; /* Прижимаем к низу */
        font-size: 14px;
        flex-shrink: 0; /* Запрещаем сжатие */
    }

    /* Стили для скролла */
    .comment-text::-webkit-scrollbar {
      width: 6px;
    }

    .comment-text::-webkit-scrollbar-track {
      background: rgba(0,0,0,0.1);
    }

    .comment-text::-webkit-scrollbar-thumb {
      background: #888;
      border-radius: 3px;
    }
    .comment-date {
      font-size: 0.8em;
      color: #99aab5;
      opacity: 0.8;
}
  </style>
    <style>
        /* Стили для кнопки */
        .sidebar-button {
            position: fixed;
            right: -15px;
            top: 50%;
            transform: rotate(-90deg) translateY(-50%);
            transform-origin: right top;
            z-index: 10000;
            padding: 12px 25px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 5px 5px 0 0;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
            animation: pulse 2s infinite;
        }

        .sidebar-button:hover {
            right: -10px;
            background: #0056b3;
        }

        /* Анимация пульсации */
        @keyframes pulse {
            0% { transform: rotate(-90deg) translateY(-50%) scale(1); }
            50% { transform: rotate(-90deg) translateY(-50%) scale(1.05); }
            100% { transform: rotate(-90deg) translateY(-50%) scale(1); }
        }

        /* Стили для контейнера формы */
        .form-container {
            position: fixed;
            right: -400px;
            top: 0;
            width: 350px;
            height: 100vh;
            background: #23272A;
            box-shadow: -2px 0 15px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            padding: 20px;
            overflow-y: auto;
            z-index: 9999;
        }

        .form-container.active {
            right: 0;
        }

        /* Стилизация формы */
        .form-container form {
            margin-top: 20px;
        }

        .form-control {
            margin-bottom: 15px;
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .btn-primary {
            background: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            width: 100%;
        }

        .btn-primary:hover {
            background: #0056b3;
        }

        fieldset {
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-bottom: 15px;
            padding: 10px;
        }

        legend {
            font-weight: bold;
            padding: 0 5px;
        }
    </style>
  <!-- Шрифты -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Unbounded:wght@200..900&display=swap" rel="stylesheet">
</head>

<body>
  <header class="main-banner">
    <div class="main-banner-img">
      <img src="https://zoliryzik.ru/assets/img/logo.webp" alt="Логотип сообщества" loading="lazy">
    </div>

    <div class="main-banner-title">
      <h1>ZoLiryzik</h1>
      <h2>COMMUNITY</h2>
    </div>

    <nav class="nav-buttons">
      <a href="#" class="nav-button" aria-label="Главная">
        <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
          <path d="M575.8 255.5c0 18-15 32.1-32 32.1l-32 0 .7 160.2c0 2.7-.2 5.4-.5 8.1l0 16.2c0 22.1-17.9 40-40 40l-16 0c-1.1 0-2.2 0-3.3-.1c-1.4 .1-2.8 .1-4.2 .1L416 512l-24 0c-22.1 0-40-17.9-40-40l0-24 0-64c0-17.7-14.3-32-32-32l-64 0c-17.7 0-32 14.3-32 32l0 64 0 24c0 22.1-17.9 40-40 40l-24 0-31.9 0c-1.5 0-3-.1-4.5-.2c-1.2 .1-2.4 .2-3.6 .2l-16 0c-22.1 0-40-17.9-40-40l0-112c0-.9 0-1.9 .1-2.8l0-69.7-32 0c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24z"/>
        </svg>
        <span>Главная</span>
      </a>

      <a href="/support" class="nav-button" aria-label="Дискорд">
        <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512">
          <path d="M524.5 69.8a1.5 1.5 0 0 0-.8-.7A485.1 485.1 0 0 0 404.1 32a1.8 1.8 0 0 0-1.9.9 337.5 337.5 0 0 0-14.9 30.6 447.8 447.8 0 0 0-134.4 0 309.5 309.5 0 0 0-15.1-30.6 1.9 1.9 0 0 0-1.9-.9A483.7 483.7 0 0 0 116.1 69.1a1.7 1.7 0 0 0-.8.7C39.1 183.7 18.2 294.7 28.4 404.4a2 2 0 0 0 .8 1.4A487.7 487.7 0 0 0 176 479.9a1.9 1.9 0 0 0 2.1-.7 348.2 348.2 0 0 0 30-48.8 1.9 1.9 0 0 0-1-2.6 321.2 321.2 0 0 1-45.9-21.9 1.9 1.9 0 0 1-.2-3.1c3.1-2.3 6.2-4.7 9.1-7.1a1.8 1.8 0 0 1 1.9-.3c96.2 43.9 200.4 43.9 295.5 0a1.8 1.8 0 0 1 1.9.2c2.9 2.4 6 4.9 9.1 7.2a1.9 1.9 0 0 1-.2 3.1 301.4 301.4 0 0 1-45.9 21.8 1.9 1.9 0 0 0-1 2.6 391.1 391.1 0 0 0 30 48.8 1.9 1.9 0 0 0 2.1.7 486 486 0 0 0 160.2-72.5 1.9 1.9 0 0 0 .8-1.4C623.7 277.6 590.9 167.5 524.5 69.8zM222.5 337.6c-29 0-52.8-26.6-52.8-59.2S193.1 219.1 222.5 219.1c29.7 0 53.3 26.8 52.8 59.2C275.3 311 251.9 337.6 222.5 337.6zm195.4 0c-29 0-52.8-26.6-52.8-59.2S388.4 219.1 417.9 219.1c29.7 0 53.3 26.8 52.8 59.2C470.7 311 447.5 337.6 417.9 337.6z"/>
        </svg>
        <span>Дискорд</span>
      </a>

      <a href="/jb" class="nav-button" aria-label="Коды">
        <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
          <path d="M503.5 241.5c-.1-1.6-.2-3.1-.2-4.7v-.1l-.4-4.7v-.1a245.9 245.9 0 0 0-7.3-41.2c0-.1 0-.1-.1-.2l-1.1-4c-.1-.2-.1-.5-.2-.6-.4-1.2-.7-2.5-1.1-3.7-.1-.2-.1-.6-.2-.8-.4-1.2-.7-2.4-1.1-3.5-.1-.4-.2-.6-.4-1-.4-1.2-.7-2.3-1.2-3.5l-.4-1.1c-.4-1.1-.8-2.3-1.2-3.4a8.3 8.3 0 0 0-.4-1c-.5-1.1-.8-2.3-1.3-3.4-.1-.2-.2-.6-.4-.8-.5-1.2-1-2.3-1.4-3.5 0-.1-.1-.2-.1-.4-1.6-3.8-3.2-7.7-5-11.4l-.4-.7c-.5-1-.8-1.8-1.3-2.6-.2-.5-.5-1.1-.7-1.6-.4-.8-.8-1.6-1.2-2.4-.4-.6-.6-1.2-1-1.8s-.8-1.4-1.2-2.3c-.4-.6-.7-1.3-1.1-1.9s-.8-1.4-1.2-2.2a18.1 18.1 0 0 0-1.2-2c-.4-.7-.8-1.3-1.2-2s-.8-1.3-1.2-2-.8-1.3-1.2-1.9-.8-1.4-1.3-2.2a15.6 15.6 0 0 0-1.2-1.8L463.2 119a15.6 15.6 0 0 0-1.2-1.8c-.5-.7-1.1-1.6-1.6-2.3-.4-.5-.7-1.1-1.1-1.6l-1.8-2.5c-.4-.5-.6-.8-1-1.3-1-1.3-1.8-2.5-2.8-3.7a248.8 248.8 0 0 0-23.5-26.6A186.8 186.8 0 0 0 412 62.5c-4-3.5-8.2-6.7-12.5-9.8a162.5 162.5 0 0 0-24.6-15.1c-2.4-1.3-4.8-2.5-7.2-3.7a254 254 0 0 0-55.4-19.6c-1.9-.4-3.8-.8-5.6-1.2h-.1c-1-.1-1.8-.4-2.8-.5a236.4 236.4 0 0 0-38-4H255.1a234.6 234.6 0 0 0-45.5 5c-33.6 7.1-63.2 21.2-82.9 39-1.1 1-1.9 1.7-2.4 2.2l-.5.5H124l-.1.1.1-.1a.1.1 0 0 0 .1-.1l-.1.1a.4.4 0 0 1 .2-.1c14.6-8.8 34.9-16 49.4-19.6l5.9-1.4c.4-.1.8-.1 1.2-.2 1.7-.4 3.4-.7 5.2-1.1.2 0 .6-.1.8-.1C250.9 20.9 319.3 40.1 367 85.6a171.5 171.5 0 0 1 26.9 32.8c30.4 49.2 27.5 111.1 3.8 147.6-34.4 53-111.4 71.3-159 24.8a84.2 84.2 0 0 1-25.6-59 74.1 74.1 0 0 1 6.2-31c1.7-3.8 13.1-25.7 18.2-24.6-13.1-2.8-37.6 2.6-54.7 28.2-15.4 22.9-14.5 58.2-5 83.3a132.9 132.9 0 0 1-12.1-39.2c-12.2-82.6 43.3-153 94.3-170.5-27.5-24-96.5-22.3-147.7 15.4-29.9 22-51.2 53.2-62.5 90.4 1.7-20.9 9.6-52.1 25.8-83.9-17.2 8.9-39 37-49.8 62.9-15.6 37.4-21 82.2-16.1 124.8.4 3.2.7 6.4 1.1 9.6 19.9 117.1 122 206.4 244.8 206.4C392.8 503.4 504 392.2 504 255c-.1-4.5-.2-9.1-.5-13.5z"/>
        </svg>
        <span>Коды</span>
      </a>
    </nav>
  </header>

  <section class="news-section">
    <h2>Последние новости</h2>
    <div class="news-search-container">
      <input type="text" id="news-search" placeholder="Поиск по новостям...">
    </div>
    <div class="news-grid" id="news-container"></div>
    <div class="no-results">Ничего не найдено. Попробуйте другие ключевые слова.</div>
  </section>

  <!-- Лента отзывов -->
  <div class="feed-container">
    <div class="comments-container" id="data-container">
      <div class="no-comments">Загрузка отзывов...</div>
    </div>
  </div>

    <!-- Кнопка для открытия формы -->
    <button id="sidebarBtn" class="sidebar-button">📝 Оставить отзыв</button>

    <!-- Контейнер формы -->
    <div id="formContainer" class="form-container">
        <form action="https://docs.google.com/forms/d/e/1FAIpQLSe7u2NHHh7S5n7h4mocDpOIiVlqZtgLKnzyEFU7SvhqQp7V2Q/formResponse"
              target="_self"
              id="bootstrapForm"
              method="POST">
            
            <fieldset>
                <h2>Отзывы ZoLiryzik COMMUNITY</h2>
            </fieldset>

            <fieldset>
                <legend>Тег в дискорде</legend>
                <div class="form-group">
                    <input id="1599223660" 
                           type="text" 
                           name="entry.1599223660" 
                           class="form-control"
                           required
                           placeholder="Пример: User#1234">
                </div>
            </fieldset>

            <fieldset>
                <legend>Оценка (1-5)</legend>
                <div class="form-group">
                    <input id="2092335419" 
                           type="number" 
                           name="entry.2092335419" 
                           class="form-control"
                           min="1"
                           max="5"
                           required
                           placeholder="Введите число от 1 до 5">
                </div>
            </fieldset>

            <fieldset>
                <legend>Комментарий</legend>
                <div class="form-group">
                    <textarea id="1743679321" 
                              name="entry.1743679321" 
                              class="form-control"
                              required
                              rows="4"
                              placeholder="Ваш комментарий..."></textarea>
                </div>
            </fieldset>

            <input type="hidden" name="fvv" value="1">
            <input type="hidden" name="fbzx" value="-3160373097437091624">
            <input type="hidden" name="pageHistory" value="0">
            <input class="btn btn-primary" type="submit" value="Отправить">
        </form>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.form/4.2.2/jquery.form.min.js"></script>

    <script>
    $(document).ready(function() {
        // Открытие/закрытие формы
        $('#sidebarBtn').click(function(e) {
            e.stopPropagation();
            $('#formContainer').toggleClass('active');
        });

        // Закрытие формы при клике вне её области
        $(document).click(function(e) {
            if (!$(e.target).closest('#formContainer').length && 
                !$(e.target).is('#sidebarBtn')) {
                $('#formContainer').removeClass('active');
            }
        });

        // Обработка отправки формы
        $('#bootstrapForm').submit(function(event) {
            event.preventDefault();
            
            // Проверка валидности формы
            if (!this.checkValidity()) {
                alert("Пожалуйста, заполните все обязательные поля правильно!");
                return;
            }

            // Отправка данных
            $(this).ajaxSubmit({
                dataType: 'jsonp',
                error: function() {
                    alert('Спасибо за ваш отзыв! Форма отправлена.');
                    $('#formContainer').removeClass('active');
                    $('#bootstrapForm')[0].reset();
                }
            });
        });
    });
    </script>
  <script src="https://zoliryzik.ru/assets/js/main.js" defer></script>

  <script>
const SHEET_ID = '1f2Ka0lWqId-KAZBggq3tDD-WHy_Ggu-0X8_CpZiB7IM';
const SHEET_NAME = 'Ответы';
const SCROLL_SPEED = 40;
const DUPLICATE_INTERVAL = 1; // 40 секунд
const MAX_DUPLICATES = 10;

let scrollAnimationFrame = null;
let isScrolling = true;
let commentsWrapper = null;
let currentPosition = 0;
let contentWidth = 0;
let originalComments = [];
let duplicateCount = 0;
let duplicationInterval = null;

function duplicateComments() {
    if (!commentsWrapper || duplicateCount >= MAX_DUPLICATES) {
        clearInterval(duplicationInterval);
        return;
    }
    
    // Создаем клоны и добавляем их
    const clones = originalComments.map(el => el.cloneNode(true));
    commentsWrapper.append(...clones);
    duplicateCount++;
    
    // Обновляем параметры анимации
    contentWidth = commentsWrapper.scrollWidth / 2;
    currentPosition = currentPosition % contentWidth;
}

function startAutoScroll() {
    if (!commentsWrapper || !originalComments.length) return;

    // Очистка предыдущих клонов
    while (commentsWrapper.children.length > originalComments.length) {
        commentsWrapper.lastChild.remove();
    }

    // Сброс параметров дублирования
    duplicateCount = 0;
    clearInterval(duplicationInterval);
    duplicationInterval = setInterval(duplicateComments, DUPLICATE_INTERVAL);

    // Первоначальное заполнение
    duplicateComments();

    function animate() {
        if (!isScrolling) {
            scrollAnimationFrame = requestAnimationFrame(animate);
            return;
        }

        currentPosition += (SCROLL_SPEED * 16.6) / 1000;
        
        if (currentPosition >= contentWidth) {
            currentPosition = 0;
            commentsWrapper.style.transform = `translateX(0)`;
        }

        commentsWrapper.style.transform = `translateX(-${currentPosition}px)`;
        scrollAnimationFrame = requestAnimationFrame(animate);
    }

    cancelAnimationFrame(scrollAnimationFrame);
    scrollAnimationFrame = requestAnimationFrame(animate);
}

function initEventHandlers() {
    const feedContainer = document.querySelector('.feed-container');
    
    const pauseScroll = () => {
        isScrolling = false;
        commentsWrapper.style.transition = 'transform 0.5s ease-out';
    };

    const resumeScroll = () => {
        isScrolling = true;
        commentsWrapper.style.transition = 'none';
        startAutoScroll();
    };

    feedContainer.addEventListener('mouseenter', pauseScroll);
    feedContainer.addEventListener('mouseleave', resumeScroll);
    feedContainer.addEventListener('touchstart', pauseScroll);
    feedContainer.addEventListener('touchend', resumeScroll);
}

function processData(data) {
    const container = document.getElementById('data-container');
    
    if (!data.rows || data.rows.length <= 1) {
        container.innerHTML = '<div class="no-comments">Пока нет отзывов</div>';
        return;
    }

    originalComments = data.rows.reverse().map(row => {
        const [dateCol, authorCol, ratingCol, textCol] = row.c;
        const comment = document.createElement('div');
        comment.className = 'comment';
        comment.innerHTML = `
            <div class="comment-header">
                <div class="comment-author">${authorCol?.v || 'Аноним'}</div>
                <div class="comment-date">${dateCol?.f || ''}</div>
            </div>
            <div class="comment-text">${textCol?.v || ''}</div>
            ${ratingCol?.v ? `<div class="comment-rating">★ ${Math.round(ratingCol.v)}/5</div>` : ''}
        `;
        return comment;
    });

    container.innerHTML = '';
    originalComments.forEach(comment => container.appendChild(comment));
    commentsWrapper = container;

    setTimeout(() => {
        initEventHandlers();
        startAutoScroll();
    }, 300);
}

function loadData() {
    fetch(`https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:json&sheet=${SHEET_NAME}`)
        .then(r => r.text())
        .then(t => {
            try {
                const json = JSON.parse(t.substring(47).slice(0, -2));
                processData(json.table);
            } catch(e) {
                console.error('Ошибка данных:', e);
                document.getElementById('data-container').innerHTML = 
                    '<div class="no-comments">Ошибка загрузки данных</div>';
            }
        })
        .catch(e => {
            console.error('Ошибка сети:', e);
            document.getElementById('data-container').innerHTML = 
                '<div class="no-comments">Нет соединения</div>';
        });
}

document.addEventListener('DOMContentLoaded', () => {
    loadData();
    
    window.addEventListener('resize', () => {
        if (commentsWrapper) {
            contentWidth = commentsWrapper.scrollWidth / 2;
        }
    });
});

document.addEventListener('visibilitychange', () => {
    if (document.hidden) {
        cancelAnimationFrame(scrollAnimationFrame);
        clearInterval(duplicationInterval);
    } else {
        startAutoScroll();
    }
});
  </script>
</body>
</html>
