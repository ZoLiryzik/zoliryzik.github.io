<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
  <title>ZoLiryzik Community - –ö–æ–º–∞–Ω–¥—ã</title>
  <meta name="description" content="–ü—Ä–∏–º–µ—Ä—ã –∫–æ–º–∞–Ω–¥ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞">
  <meta property="og:image" content="/assets/img/logo.webp">
  <link rel="icon" href="/assets/img/image.ico" type="image/x-icon">
  <link rel="shortcut icon" href="/assets/img/image.ico" type="image/x-icon">
  <link rel="stylesheet" href="/assets/css/banner.css">
  <link rel="stylesheet" href="/assets/css/button.css">
  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="stylesheet" href="/assets/css/news.css">
  <!-- –°—Ç–∏–ª–∏ -->
  <style>


    /* –°–µ–∫—Ü–∏—è —Å –∫–æ–º–∞–Ω–¥–∞–º–∏ */
    .codes-section {
      padding: 2rem;
      max-width: 1200px;
      margin: 2rem auto;
    }

    .search-container {
      margin-bottom: 2rem;
      text-align: center;
    }

    #code-search {
      width: 100%;
      max-width: 500px;
      padding: 12px 20px;
      border-radius: 25px;
      border: 2px solid #7289da;
      background: #2b2b2b;
      color: #fff;
      font-size: 1rem;
    }

    /* –°–µ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥ */
    .code-grid {
      display: grid;
      gap: 1.5rem;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    }

    .code-card {
      background: #2c2f33;
      border-radius: 15px;
      padding: 1.5rem;
      transition: transform 0.3s ease;
    }

    .code-card:hover {
      transform: translateY(-5px);
    }

    .code-actions {
      display: flex;
      gap: 10px;
      margin-bottom: 1rem;
    }

    .btn {
      padding: 8px 16px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: 'Unbounded', sans-serif;
    }

    .preview-btn {
      background: #43b581;
      color: white;
    }

    .copy-btn {
      background: #7289da;
      color: white;
    }

    .btn:hover {
      opacity: 0.9;
    }

    pre.code {
      background: #23272a;
      padding: 1rem;
      border-radius: 10px;
      overflow-x: auto;
      white-space: pre-wrap;
      word-wrap: break-word;
    }

    .no-results {
      grid-column: 1 / -1; /* –ó–∞–Ω–∏–º–∞–µ—Ç –≤—Å—é —à–∏—Ä–∏–Ω—É —Å–µ—Ç–∫–∏ */
      text-align: center;
      color: #888;
      padding: 2rem;
      width: 100%;
    }

    /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.8);
      z-index: 1000;
    }

    .modal-content {
      background: #2c2f33;
      margin: 5% auto;
      padding: 20px;
      width: 80%;
      max-width: 800px;
      border-radius: 15px;
      position: relative;
    }

    .close {
      color: #aaa;
      position: absolute;
      right: 20px;
      top: 10px;
      font-size: 28px;
      cursor: pointer;
    }

    .close:hover {
      color: #fff;
    }
    .download-btn {
        background: #faa61a;
        color: white;
    }
  </style>
</head>
<body>
  <!-- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ -->
  <header class="main-banner">
    <div class="main-banner-img">
      <img src="/assets/img/logo.webp" alt="–õ–æ–≥–æ—Ç–∏–ø —Å–æ–æ–±—â–µ—Å—Ç–≤–∞" loading="lazy">
    </div>

    <div class="main-banner-title">
      <h1>ZoLiryzik</h1>
      <h2>COMMUNITY</h2>
    </div>

    <nav class="nav-buttons">
      <a href="#" class="nav-button" aria-label="–ì–ª–∞–≤–Ω–∞—è">
        <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
          <path d="M575.8 255.5c0 18-15 32.1-32 32.1l-32 0 .7 160.2c0 2.7-.2 5.4-.5 8.1l0 16.2c0 22.1-17.9 40-40 40l-16 0c-1.1 0-2.2 0-3.3-.1c-1.4 .1-2.8 .1-4.2 .1L416 512l-24 0c-22.1 0-40-17.9-40-40l0-24 0-64c0-17.7-14.3-32-32-32l-64 0c-17.7 0-32 14.3-32 32l0 64 0 24c0 22.1-17.9 40-40 40l-24 0-31.9 0c-1.5 0-3-.1-4.5-.2c-1.2 .1-2.4 .2-3.6 .2l-16 0c-22.1 0-40-17.9-40-40l0-112c0-.9 0-1.9 .1-2.8l0-69.7-32 0c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24z"></path>
          </svg>
        <span>–ì–ª–∞–≤–Ω–∞—è</span>
      </a>
      <!--<a href="/support" class="nav-button" aria-label="–û –Ω–∞—Å">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
          <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
          <path fill="currentColor" d="M13 7h-2v6h6v-2h-4z"/>
        </svg>-->
      <a href="/support" class="nav-button" aria-label="–û –Ω–∞—Å">
        <svg fill="#ffffff" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512">
          <path fill="currentColor" d="M524.5 69.8a1.5 1.5 0 0 0 -.8-.7A485.1 485.1 0 0 0 404.1 32a1.8 1.8 0 0 0 -1.9 .9 337.5 337.5 0 0 0 -14.9 30.6 447.8 447.8 0 0 0 -134.4 0 309.5 309.5 0 0 0 -15.1-30.6 1.9 1.9 0 0 0 -1.9-.9A483.7 483.7 0 0 0 116.1 69.1a1.7 1.7 0 0 0 -.8 .7C39.1 183.7 18.2 294.7 28.4 404.4a2 2 0 0 0 .8 1.4A487.7 487.7 0 0 0 176 479.9a1.9 1.9 0 0 0 2.1-.7A348.2 348.2 0 0 0 208.1 430.4a1.9 1.9 0 0 0 -1-2.6 321.2 321.2 0 0 1 -45.9-21.9 1.9 1.9 0 0 1 -.2-3.1c3.1-2.3 6.2-4.7 9.1-7.1a1.8 1.8 0 0 1 1.9-.3c96.2 43.9 200.4 43.9 295.5 0a1.8 1.8 0 0 1 1.9 .2c2.9 2.4 6 4.9 9.1 7.2a1.9 1.9 0 0 1 -.2 3.1 301.4 301.4 0 0 1 -45.9 21.8 1.9 1.9 0 0 0 -1 2.6 391.1 391.1 0 0 0 30 48.8 1.9 1.9 0 0 0 2.1 .7A486 486 0 0 0 610.7 405.7a1.9 1.9 0 0 0 .8-1.4C623.7 277.6 590.9 167.5 524.5 69.8zM222.5 337.6c-29 0-52.8-26.6-52.8-59.2S193.1 219.1 222.5 219.1c29.7 0 53.3 26.8 52.8 59.2C275.3 311 251.9 337.6 222.5 337.6zm195.4 0c-29 0-52.8-26.6-52.8-59.2S388.4 219.1 417.9 219.1c29.7 0 53.3 26.8 52.8 59.2C470.7 311 447.5 337.6 417.9 337.6z"/>
          <path fill="currentColor" d="M13 7h-2v6h6v-2h-4z"/>
        </svg>
        <span>–î–∏—Å–∫–æ—Ä–¥</span>
      </a>
    </nav>
  </header>

  <main>
    <section class="codes-section">
      <div class="search-container">
        <input type="text" id="code-search" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º...">
      </div>
      <div class="code-grid" id="codes-container"></div>
    </section>
  </main>

  <div id="preview-modal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <pre><code id="preview-code"></code></pre>
    </div>
  </div>

  <script>
    const codeExamples = [
        {
            title: "–°–Ω—è—Ç–∏–µ –∏–∑ –±–∞–Ω–∫–∞ 1",
            code: `{% set money = member.getAttribute("bank") %}
{% require arguments.get(1) returning "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: !—Å–Ω—è—Ç—å <–∫–æ–ª-–≤–æ>" %}
{% require number(arguments.get(1)) returning "–≠—Ç–æ –Ω–µ —á–∏—Å–ª–æ" %}
{% require arguments.get(1) > 0 returning "**–ù–µ–ª—å–∑—è —Å–Ω—è—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—É—é —Å—É–º–º—É**" %}
{% set abank = arguments.get(1) %}
{% set mbank = member.getAttribute("bank").value %}
{% if mbank < abank %}
{% return "**–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –≤ –±–∞–Ω–∫–µ**" %}
{% else %}
{% do member.getAttribute("bank").decrement(abank) %}
{% do member.getAttribute("money").increment(abank) %}
**–°–Ω—è—Ç–æ: *{{abank}}* –º–æ–Ω–µ—Ç –∏–∑ –±–∞–Ω–∫–∞**
{% endif %}`,
            description: "–ü–µ—Ä–≤–∞—è —á–∞—Å—Ç—å –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Å–Ω—è—Ç–∏—è –¥–µ–Ω–µ–≥",
            link: "/commands/bank-withdraw-1"
        },
        {
            title: "–°–Ω—è—Ç–∏–µ –∏–∑ –±–∞–Ω–∫–∞ 2", 
            code: `{% set money = member.getAttribute("money") %}
{% require arguments.get(1) returning "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: !–ø–æ–ª–æ–∂–∏—Ç—å <–∫–æ–ª-–≤–æ>" %}
{% require number(arguments.get(1)) returning "–≠—Ç–æ –Ω–µ —á–∏—Å–ª–æ" %}
{% require arguments.get(1) > 0 returning "**–ù–µ–ª—å–∑—è –ø–æ–ª–æ–∂–∏—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—É—é —Å—É–º–º—É**" %}
{% set abank = arguments.get(1) %}
{% set mbank = member.getAttribute("money").value %}
{% if mbank < abank %}
{% return "**–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤**" %}
{% else %}
{% do member.getAttribute("money").decrement(abank) %}
{% do member.getAttribute("bank").increment(abank) %}
**–ü–æ–ª–æ–∂–µ–Ω–æ: *{{abank}}* –º–æ–Ω–µ—Ç –≤ –±–∞–Ω–∫**
{% endif %}`,
            description: "–í—Ç–æ—Ä–∞—è —á–∞—Å—Ç—å –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Å–Ω—è—Ç–∏—è",
            link: "/commands/bank-withdraw-2"
        }
    ];

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    document.addEventListener('DOMContentLoaded', () => {
        renderCodes();
        initSearch();
        initModal();
    });

    // –†–µ–Ω–¥–µ—Ä —Å–ø–∏—Å–∫–∞ –∫–æ–º–∞–Ω–¥
    function renderCodes(codes = codeExamples) {
        const container = document.getElementById('codes-container');
        container.innerHTML = '';

        if (codes.length === 0) {
            const emptyMsg = document.createElement('div');
            emptyMsg.className = 'no-results';
            emptyMsg.textContent = 'üòû –ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ';
            container.appendChild(emptyMsg);
            return;
        }

        codes.forEach(cmd => {
            const card = document.createElement('div');
            card.className = 'code-card';
            card.innerHTML = `
                <div class="code-actions">
                    <button class="btn preview-btn" data-id="${cmd.title}">–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä</button>
                    <button class="btn copy-btn" data-code="${encodeURIComponent(cmd.code)}">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                    <button class="btn download-btn" 
                        data-filename="${sanitizeFileName(cmd.title)}" 
                        data-code="${encodeURIComponent(cmd.code)}">
                        –°–∫–∞—á–∞—Ç—å
                    </button>
                </div>
                <h3>${cmd.title}</h3>
                <p>${cmd.description}</p>
                <a href="${cmd.link}" class="code-link" target="_blank">–ü–æ–¥—Ä–æ–±–Ω–µ–µ ‚Üí</a>
            `;
            container.appendChild(card);
        });
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–∏—Å–∫–∞
    function initSearch() {
        const search = document.getElementById('code-search');
        search.addEventListener('input', (e) => {
            const query = e.target.value.toLowerCase().trim();
            const filtered = codeExamples.filter(cmd => 
                cmd.title.toLowerCase().includes(query) ||
                cmd.description.toLowerCase().includes(query) ||
                cmd.code.toLowerCase().includes(query) ||
                cmd.link.toLowerCase().includes(query)
            );
            renderCodes(filtered);
        });
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
    function initModal() {
        const modal = document.getElementById('preview-modal');
        const closeBtn = modal.querySelector('.close');

        document.addEventListener('click', (e) => {
            // –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä
            if (e.target.classList.contains('preview-btn')) {
                const title = e.target.dataset.id;
                const cmd = codeExamples.find(c => c.title === title);
                if (cmd) {
                    document.getElementById('preview-code').textContent = cmd.code;
                    modal.style.display = 'block';
                }
            }

            // –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
            if (e.target.classList.contains('copy-btn')) {
                const code = decodeURIComponent(e.target.dataset.code);
                copyToClipboard(code);
            }

            // –°–∫–∞—á–∏–≤–∞–Ω–∏–µ
            if (e.target.classList.contains('download-btn')) {
                const code = decodeURIComponent(e.target.dataset.code);
                const filename = `${e.target.dataset.filename}.txt`;
                downloadAsTxt(code, filename);
            }
        });

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–∫–∏
        closeBtn.onclick = () => modal.style.display = 'none';
        window.onclick = (e) => e.target === modal && (modal.style.display = 'none');
    }

    // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
    function sanitizeFileName(name) {
        return name
            .replace(/[^–∞-—è–ê-–Ø—ë–Åa-zA-Z0-9\s_-]/g, '')
            .replace(/\s+/g, '_')
            .substring(0, 50);
    }

    function downloadAsTxt(content, filename) {
    try {
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—É—Å—Ç–æ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
        if (!content || content.trim().length === 0) {
            throw new Error('–ü—É—Å—Ç–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞');
        }

        // –°–æ–∑–¥–∞–µ–º Blob —Å BOM –¥–ª—è UTF-8
        const bom = new Uint8Array([0xEF, 0xBB, 0xBF]);
        const blob = new Blob([bom, content], { 
            type: 'text/plain;charset=utf-8' 
        });

        // –°–æ–∑–¥–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–π URL
        const url = URL.createObjectURL(blob);
        
        const a = document.createElement('a');
        a.href = url;
        a.download = filename;
        a.style.display = 'none';
        a.dataset.downloadurl = ['text/plain', a.download, a.href].join(':');
        
        document.body.appendChild(a);
        
        // –ò—Å–ø–æ–ª—å–∑—É–µ–º requestAnimationFrame –¥–ª—è –ª—É—á—à–µ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
        requestAnimationFrame(() => {
            const event = new MouseEvent('click', {
                view: window,
                bubbles: true,
                cancelable: true
            });
            a.dispatchEvent(event);
            
            // –£—Å–∫–æ—Ä—è–µ–º –æ—á–∏—Å—Ç–∫—É –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤
            setTimeout(() => {
                URL.revokeObjectURL(url);
                document.body.removeChild(a);
            }, 1e4); // 10 —Å–µ–∫—É–Ω–¥ –≤–º–µ—Å—Ç–æ 100 –º—Å
        });

        showNotification(`‚úì –§–∞–π–ª ${filename} —Å–∫–∞—á–∞–Ω!`);
    } catch (err) {
        console.error('Download error:', err);
        showNotification(`‚ö† –û—à–∏–±–∫–∞: ${err.message}`, true);
    }
}

// –û–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å–∞–Ω–∏—Ç–∞–π–∑–∏–Ω–≥–∞ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞
function sanitizeFileName(name) {
    return name
        .replace(/[/\\?%*:|"<>]/g, '') // –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –≤ Windows
        .replace(/\s+/g, '_')
        .normalize('NFD') // –†–∞–∑–±–∏–≤–∞–µ–º –¥–∏–∞–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–Ω–∞–∫–∏
        .replace(/[\u0300-\u036f]/g, '') // –£–¥–∞–ª—è–µ–º –¥–∏–∞–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–Ω–∞–∫–∏
        .substring(0, 100) // –õ–∏–º–∏—Ç –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö –∏–º—ë–Ω
        .trim()
        .replace(/_+/g, '_')
        .replace(/^_+|_+$/g, '') // –£–¥–∞–ª—è–µ–º –ø–æ–¥—á—ë—Ä–∫–∏–≤–∞–Ω–∏—è –≤ –Ω–∞—á–∞–ª–µ/–∫–æ–Ω—Ü–µ
        || 'unnamed_file'; // –î–µ—Ñ–æ–ª—Ç–Ω–æ–µ –∏–º—è –µ—Å–ª–∏ –≤—Å—ë —É–¥–∞–ª–∏–ª–æ—Å—å
}
</script>
</body>
</html>